
DROP TABLE IF EXISTS BOOKS

CREATE TABLE BOOKS(
BOOKS_ID INT PRIMARY KEY,
BOOK_NAME VARCHAR(20) NOT NULL,
AUTHOR_NAME VARCHAR(20) NOT NULL
)


SELECT * FROM BOOKS

ALTER TABLE BOOKS
ADD BOOK_COUNT INT CHECK(BOOK_COUNT>0) NOT NULL
SELECT * FROM BOOKS
INSERT INTO BOOKS VALUES(101, 'HARRY POTTER', 'DAVID', 2)


CREATE TABLE LIBRARY_VISITORS(

USER_ID INT PRIMARY KEY,
NAME VARCHAR(20) NOT NULL,
AGE INT CHECK(AGE>=17) NOT NULL,
EMAIL VARCHAR(20) NOT NULL UNIQUE
)
SELECT * FROM LIBRARY_VISITORS
INSERT INTO LIBRARY_VISITORS(USER_ID,NAME,AGE,EMAIL)
VALUES(501, 'VANSH SHARMA', 20, 'vansh@gmail.com')
INSERT INTO LIBRARY_VISITORS VALUES(502, 'Ansh SHARMA', 19, 'ansh@gmail.com')


CREATE TABLE BOOK_ISSUE(
BOOK_ISSUE_ID INT PRIMARY KEY,
USER_ID INT REFERENCES LIBRARY_VISITORS(USER_ID),
BOOK_ID INT NOT NULL,
FOREIGN KEY(BOOK_ID) REFERENCES BOOKS(BOOKS_ID)
)

ALTER TABLE BOOK_ISSUE
ADD ISSUE_DATE DATE

SELECT * FROM BOOK_ISSUE

INSERT INTO BOOK_ISSUE VALUES(1001, 501, 101, '2026-01-09')

UPDATE BOOK_ISSUE
SET ISSUE_DATE='2026-01-09'
WHERE BOOK_ISSUE_ID = 1001

CREATE ROLE LIBRARIAN 
WITH LOGIN PASSWORD 'Srijan2026@'

SELECT CURRENT_USER



GRANT SELECT,INSERT,DELETE,UPDATE ON BOOKS TO LIBRARIAN

REVOKE SELECT,INSERT,DELETE,UPDATE ON BOOKS FROM LIBRARIAN

